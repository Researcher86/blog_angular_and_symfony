<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
<!--    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.3/dist/sockjs.min.js" type="text/javascript"></script>-->
    <script src="https://cdn.jsdelivr.net/gh/centrifugal/centrifuge-js@2.6.4/dist/centrifuge.min.js"></script>
<!--    <script src="https://rawgit.com/centrifugal/centrifuge-js/master/centrifuge.js" type="text/javascript"></script>-->
</head>
<body>

<!--<script>-->
<!--    var centrifuge = new Centrifuge('ws://localhost:8083/connection/websocket');-->

<!--    centrifuge.subscribe("news", function(message) {-->
<!--        console.log(message);-->
<!--    });-->

<!--    centrifuge.connect();-->
<!--</script>-->

<!--<script type="text/javascript">-->
<!--    var centrifuge = new Centrifuge('http://localhost:8083/connection/sockjs');-->

<!--    // var centrifuge = new Centrifuge({-->
<!--    //     url: 'ws://localhost:8083/connection/websocket',-->
<!--    //     project: 'development',-->
<!--    //     insecure: true-->
<!--    //     // user: "1",-->
<!--    //     // timestamp: "UNIX TIMESTAMP SECONDS",-->
<!--    //     // token: "SHA-256 HMAC TOKEN"-->
<!--    // });-->

<!--    // Когда центрифуга подключилась,-->
<!--    centrifuge.on('connect', function() {-->
<!--        console.log('connected...');-->
<!--    });-->

<!--    centrifuge.subscribe("news", function(message) {-->
<!--        console.log(message);-->
<!--    });-->

<!--    centrifuge.connect();-->

<!--</script>-->

<script type="text/javascript">
    const centrifuge = new Centrifuge("ws://blog.local:8080/centrifugo/connection/websocket");
    centrifuge.setToken("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIn0.FasJnVFa0htLRI3VajVhbweHTHfeKTXV0y6emUBiFGs");

    centrifuge.on('connect', function(ctx) {
        console.log("connected", ctx);
    });

    centrifuge.on('disconnect', function(ctx) {
        console.log("disconnected", ctx);
    });

    centrifuge.subscribe("news", function(ctx) {
        console.log(ctx.data);
    });

    centrifuge.connect();
</script>
</body>
</html>
